/*
 Crox v1.1.0
 https://github.com/thx/crox

 Released under the MIT license
 Date: Fri, 6 Dec 2013 09:13:24 UTC
*/
var Crox=function(){function E(b,a){this.row=b;this.col=a}function B(b,a){var e=b.substring(0,a),f=e.match(/\r\n?|\n/g),c=1;f&&(c+=f.length);e=1+/[^\r\n]*$/.exec(e)[0].length;return new E(c,e)}function F(b){return'"'+b.replace(/[\x00-\x1f"\\\u2028\u2029]/g,function(a){switch(a){case '"':return'\\"';case "\\":return"\\\\";case "\b":return"\\b";case "\f":return"\\f";case "\n":return"\\n";case "\r":return"\\r";case "\t":return"\\t"}return"\\u"+("000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'}function I(b){function a(a,
b,d,g){this.tag=a;this.text=b;this.index=d;this.subMatches=g}function e(){}function f(a){for(var b=1,d=[],g=[1],c=[],l=0;l<a.length;++l)g.push(b+=RegExp("|"+a[l][0].source).exec("").length),c.push(a[l][1]||e),d.push("("+a[l][0].source+")");return[RegExp(d.join("|")+"|","g"),g,c]}a.prototype.toString=function(){return this.text};var c=b.$||"$",k={},h;for(h in b)"$"!=h.charAt(0)&&(k[h]=f(b[h]));return function(b){var n=b.length,d=0,g=[""],e={text:"",index:0,source:b,pushState:function(a){g.push(a)},
popState:function(){g.pop()},retract:function(a){d-=a}};return{scan:function(){do{var l;a:{var w=k[g[g.length-1]],s=w[0];s.lastIndex=d;l=s.exec(b);if(""==l[0]){if(d<n)throw Error("lexer error: "+B(b,d)+"\n"+b.slice(d,d+50));l=new a(c,"",d)}else{e.index=d;d=s.lastIndex;for(var s=w[1],f=0;f<s.length;++f)if(l[s[f]]){w=w[2][f].apply(e,l.slice(s[f],s[f+1]));l=new a(w,l[0],e.index,l.slice(s[f]+1,s[f+1]));break a}l=void 0}}}while(null==l.tag);return l},getPos:function(a){return B(b,a)},reset:function(){d=
0;g=[""]}}}}function t(b){var a;a:{switch(b){case "id":case "lit":a=!0;break a}a=!1}return a||"."==b||"[]"==b}function m(b){return t(b)||"!"==b||"u-"==b}function q(b){if(m(b))return!0;switch(b){case "*":case "/":case "%":return!0}return!1}function u(b){if(q(b))return!0;switch(b){case "+":case "-":return!0}return!1}function x(b){if(u(b))return!0;switch(b){case "<":case ">":case "<=":case ">=":return!0}return!1}function y(b){if(x(b))return!0;switch(b){case "eq":case "ne":return!0}return!1}function D(b){return y(b)||
"&&"==b}function J(b){return D(b)||"||"==b}function G(b){function a(a){h+=k+a+"\n"}function e(b){for(var n=0;n<b.length;++n){var d=b[n];switch(d[0]){case "if":a("if("+c(d[1])+"){");k+="\t";e(d[2]);k=k.slice(0,-1);a("}");d[3]&&(a("else{"),k+="\t",e(d[3]),k=k.slice(0,-1),a("}"));break;case "each":var g=d[3]||"$i";a("var $list = "+c(d[1])+";");a("for(var "+g+" in $list) {");k+="\t";a("var "+d[4]+" = $list["+g+"];");e(d[2]);k=k.slice(0,-1);a("}");break;case "set":a("var "+d[1]+"="+c(d[2])+";");break;
case "eval":g=c(d[1]);d[2]&&(g="$htmlEncode("+g+")");a("$print("+g+");");break;case "text":a("$print("+F(d[1])+");");break;default:throw Error("unknown stmt: "+d[0]);}}}function f(a,b){var d=c(a);b&&!b(a[0])&&(d="("+d+")");return d}function c(a){switch(a[0]){case "id":return a[1];case "lit":return"string"==typeof a[1]?F(a[1]):String(a[1]);case ".":return f(a[1],t)+"."+a[2];case "[]":return f(a[1],t)+"["+c(a[2])+"]";case "!":return"!"+f(a[1],m);case "u-":return"- "+f(a[1],m);case "*":case "/":case "%":return f(a[1],
q)+a[0]+f(a[2],m);case "+":case "-":return f(a[1],u)+a[0]+" "+f(a[2],q);case "<":case ">":case "<=":case ">=":return f(a[1],x)+a[0]+f(a[2],u);case "eq":case "ne":return f(a[1],y)+("eq"==a[0]?"===":"!==")+f(a[2],x);case "&&":return f(a[1],D)+"&&"+f(a[2],y);case "||":return f(a[1],J)+"||"+f(a[2],D);default:throw Error("unknown expr: "+a[0]);}}var k="\t",h="";e(b[1]);return h}function H(b){b=G(b);var a;a="var obj = { '<': '&lt;', '>': '&gt;', '&': '&amp;', '\"': '&quot;' };\n\tfunction $htmlEncode(s) {\n\t\treturn String(s).replace(/[<>&\"]/g, function(c) {\n\t\t\treturn obj[c];\n\t\t});\n\t}var $s = '';function $print(s){ $s += s; }";
a+=b;a+="return $s;";return Function("root",a)}function K(b){function a(){h=h.substr(0,h.length-2)}function e(a){C+=h+a+"\n"}function f(b){for(var d=0;d<b.length;++d){var g=b[d];switch(g[0]){case "if":e("if("+k(g[1])+"){");h+="  ";f(g[2]);a();e("}");g[3]&&(e("else{"),h+="  ",f(g[3]),a(),e("}"));break;case "each":var c=g[3]?"$i_"+g[3]+"=>":"";e("foreach("+k(g[1])+" as "+c+"$i_"+g[4]+")");e("{");h+="  ";f(g[2]);a();e("}");break;case "set":e("$i_"+g[1]+" = "+k(g[2])+";");break;case "eval":c="ToString("+
k(g[1])+")";g[2]&&(c="htmlspecialchars("+c+", ENT_COMPAT, 'GB2312')");e("$t_r .= "+c+";");break;case "text":e("$t_r .= "+("'"+String(g[1]).replace(/['\\]/g,"\\$&")+"'")+";");break;default:throw Error("unknown stmt: "+g[0]);}}}function c(a,b){var c=k(a);b&&!b(a[0])&&(c="("+c+")");return c}function k(a){switch(a[0]){case "id":return"$i_"+a[1];case "lit":return"string"==typeof a[1]?"'"+String(a[1]).replace(/['\\]/g,"\\$&")+"'":String(a[1]);case ".":return c(a[1],t)+"->"+a[2];case "[]":return c(a[1],
t)+"["+k(a[2])+"]";case "!":return"!ToBoolean("+c(a[1],m)+")";case "u-":return"- "+c(a[1],m);case "*":case "/":case "%":return c(a[1],q)+a[0]+c(a[2],m);case "+":return"plus("+c(a[1],null)+", "+c(a[2],null)+")";case "-":return c(a[1],u)+"- "+c(a[2],q);case "<":case ">":case "<=":case ">=":return c(a[1],x)+a[0]+c(a[2],u);case "eq":case "ne":var b="eq"==a[0]?"===":"!==";return c(a[1],y)+b+c(a[2],x);case "&&":return"logical_and("+c(a[1],null)+", "+c(a[2],null)+")";case "||":return"logical_or("+c(a[1],
null)+", "+c(a[2],null)+")";default:throw Error("unknown expr: "+a[0]);}}var h="",C="$t_r = '';\n";f(b[1]);return C}E.prototype.toString=function(){return"("+this.row+","+this.col+")"};var z=function(){var b=[[/\s+/,function(){return"ws"}],[/[A-Za-z_]\w*/,function(a){switch(a){case "true":case "false":return"boolean";case "set":return a;default:if(-1!=" abstract boolean break byte case catch char class const continue debugger default delete do double else enum export extends final finally float for function goto if implements import in instanceof int interface let long native new package private protected public return short static super switch synchronized this throw throws transient try typeof var void volatile while with yield ".indexOf(" "+
a+" ")||"null"==a)throw Error("Reserved: "+a+" "+B(this.source,this.index));return"realId"}}],[/"(?:[^"\\]|\\[\s\S])*"|'(?:[^'\\]|\\[\s\S])*'/,function(a){return"string"}],[/\d+(?:\.\d+)?(?:e-?\d+)?/,function(a){return"number"}],[function(a){a.sort().reverse();for(var b=0;b<a.length;++b)a[b]=a[b].replace(/[()*+?.[\]|]/g,"\\$&");return RegExp(a.join("|"))}("! % && ( ) * + - . / < <= = > >= [ ] || === !==".split(" ")),function(a){switch(a){case "===":return"eq";case "!==":return"ne";default:return a}}]];
return I({"":[[/(?:(?!{{)[\s\S])+/,function(a){return"{{"==a.substring(0,2)?(this.pushState(a),a):"text"}],[/{{{/,function(a){this.pushState(a);return a}],[/{{(?:\/if|else|\/each)}}/,function(a){return a}],[/{{(?:#(?:if|each)(?=\s))?/,function(a){this.pushState("{{");return a}]],"{{":b.concat([[/}}/,function(a){this.popState();return a}]]),"{{{":b.concat([[/}}}/,function(a){this.popState();return a}]])})}(),A=function(){function b(a,b,c,d,e,f,g){return["each",b,f,d&&eval(d.text),eval(c.text)]}function a(a){return["lit",
eval(a.text)]}function e(a,b,c){return[b.text,a,c]}function f(a,b){var c=m[n[a]];return c[b]||c._}for(var c="$ ! % && ( ) * + - . / < <= = > >= [ ] boolean eq ne number realId set string text {{ {{#each {{#if {{/each}} {{/if}} {{else}} {{{ || }} }}} AdditiveExpression EqualityExpression LogicalAndExpression LogicalOrExpression MemberExpression MultiplicativeExpression PrimaryExpression RelationalExpression UnaryExpression epsilon expr id program statement statements".split(" "),k={},h=0;h<c.length;++h)k[c[h]]=
h;var m=[{_:-2},{_:-32768},{25:3,26:4,27:5,28:6,32:7,_:-1},{_:-11},{1:9,4:10,8:11,18:12,21:13,22:14,23:15,24:16,_:0},{1:9,4:10,8:11,18:12,21:13,22:14,23:28,24:16,_:0},{_:-3},{_:-16},{_:-15},{_:-12},{22:14,23:28,_:-13},{_:-14},{7:36,8:37,_:-32},{19:38,20:39,_:-40},{3:40,_:-42},{33:41,_:-44},{9:42,16:43,_:-22},{2:44,6:45,10:46,_:-29},{_:-19},{11:47,12:48,14:49,15:50,_:-37},{_:-25},{34:51,_:0},{_:-17},{_:-13},{24:52,_:0},{34:53,_:0},{35:54,_:0},{_:-23},{5:55,_:0},{_:-24},{13:56,_:0},{22:14,23:28,_:0},
{_:-9},{24:72,_:-45},{_:-10},{_:-18},{2:44,6:45,10:46,_:-30},{2:44,6:45,10:46,_:-31},{11:47,12:48,14:49,15:50,_:-38},{11:47,12:48,14:49,15:50,_:-39},{19:38,20:39,_:-41},{3:40,_:-43},{_:-20},{17:76,_:0},{_:-28},{_:-26},{_:-27},{7:36,8:37,_:-33},{7:36,8:37,_:-35},{7:36,8:37,_:-34},{7:36,8:37,_:-36},{34:77,_:0},{34:78,_:0},{25:3,26:4,27:5,28:6,30:79,31:80,32:7,_:0},{34:81,_:0},{_:-21},{_:-4},{_:-8},{25:3,26:4,27:5,28:6,29:85,32:7,_:0},{25:3,26:4,27:5,28:6,29:86,32:7,_:0},{25:3,26:4,27:5,28:6,30:87,32:7,
_:0},{_:-7},{_:-6},{_:-5}],n=[0,1,2,3,4,5,5,5,6,5,5,5,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,5,5,5,5,5,5,31,5,5,5,5,5,5,5,5,32,33,0,34,35,5,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,0,0,56,0,57,58,59,60,61,62,63],d=[{12:1,14:2},,{13:8},,{0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,10:26,11:27},{0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,10:29,11:27},{0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,10:30,11:27},{0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,
8:25,10:31,11:27},,{4:21,6:23,8:32,11:27},{0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,10:33,11:27},{4:21,6:23,8:34,11:27},,,,{11:35},,,,,,,,,,,,,,,,,,,,,{4:21,5:57,6:23,8:25,11:27},{4:21,5:58,6:23,8:25,11:27},{0:17,4:21,5:22,6:23,7:59,8:25,11:27},{0:17,4:21,5:22,6:23,7:60,8:25,11:27},{0:17,1:61,4:21,5:22,6:23,7:24,8:25,11:27},{0:17,1:18,2:62,4:21,5:22,6:23,7:24,8:25,11:27},{11:63},{0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,10:64,11:27},{4:21,6:23,8:65,11:27},{4:21,6:23,8:66,11:27},{4:21,6:23,
8:67,11:27},{0:68,4:21,5:22,6:23,8:25,11:27},{0:69,4:21,5:22,6:23,8:25,11:27},{0:70,4:21,5:22,6:23,8:25,11:27},{0:71,4:21,5:22,6:23,8:25,11:27},,{9:73},{14:74},,,{0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,10:75,11:27},,,,,,,,,,,,,,,,,,{13:8},,,{14:82},{14:83},,{14:84},,{13:8},{13:8},{13:8}],g=[[51,48],[48,50],[50],[50,50,49],[49,28,46,34,50,30],[49,28,46,34,50,31,50,30],[49,27,46,24,45,34,50,29],[49,27,46,24,24,34,50,29],[49,26,23,47,13,46,34],[49,26,46,34],[49,32,46,35],[49,25],[47,22],[47,23],
[42,24],[42,21],[42,18],[42,47],[42,4,46,5],[40,42],[40,40,9,47],[40,40,16,46,17],[44,40],[44,1,44],[44,8,44],[41,44],[41,41,6,44],[41,41,10,44],[41,41,2,44],[36,41],[36,36,7,41],[36,36,8,41],[43,36],[43,43,11,36],[43,43,14,36],[43,43,12,36],[43,43,15,36],[37,43],[37,37,19,43],[37,37,20,43],[38,37],[38,38,3,37],[39,38],[39,39,33,38],[46,39],[45]],t=[,function(a){return["prog",a]},function(){return[]},function(a,b){a.push(b);return a},function(a,b,c,d,e){return["if",b,d]},function(a,b,c,d,e,f,g){return["if",
b,d,f]},b,b,function(a,b,c,d,e,f){return["set",c.text,e]},function(a,b,c){return["eval",b,!0]},function(a,b,c){return["eval",b,!1]},function(a){return["text",a.text]},,,a,a,function(a){return["lit","true"==a.text]},function(a){return["id",a.text]},function(a,b,c){return b},,function(a,b,c){return[".",a,c.text]},function(a,b,c,d){return["[]",a,c]},,function(a,b){return["!",b]},function(a,b){return["u-",b]},,e,e,e,,e,e,,e,e,e,e,,function(a,b,c){return["eq",a,c]},function(a,b,c){return["ne",a,c]},,e,
,e];return function(a,b){function e(){var b=a.scan();"ws"==b.tag&&(b=a.scan());return b}function h(){throw Error("Syntax error: "+a.getPos(q.index));}var m=0,n=[0],q=e(),r=[],u={get:function(a){return r[r.length+a]},set:function(a,b){r[r.length+a]=b}};if(b)for(var p in b)u[p]=b[p];for(;;)if(p=f(m,k[q.tag]))if(0<p)n.push(m=p),r.push(q),q=e();else if(0>p&&-32768<p){p=-p;var m=g[p],v=m.length-1;n.length-=v;m=d[n[n.length-1]][m[0]-36];n.push(m);t[p]?(p=t[p].apply(u,r.splice(r.length-v,v)),r.push(p)):
1!=v&&r.splice(r.length-v,v,null)}else return q.tag!=c[0]&&h(),r[0];else h()}}();return{compile:function(b){return H(A(z(b)))},compileToStr:function(b){return G(A(z(b)))},render:function(b,a){return H(A(z(b)))(a)},compileToPhp:function(b){b=K(A(z(b)));var a;a="function temp($i_root) {\nfunction isNumber($a) { return is_float($a) || is_int($a); }\nfunction plus($a, $b) {if (isNumber($a) && isNumber($b)) {\treturn $a + $b;}else {\treturn ToString($a) . ToString($b);}}\n";a+="function logical_and($a, $b) { return $a ? $b : $a; }\n";
a+="function logical_or($a, $b) { return $a ? $a : $b; }\n";a+="function ToString($a) {\n\tif (is_string($a)) return $a;\n\tif (isNumber($a)) return (string)$a;\n\tif (is_bool($a)) return $a ? 'true' : 'false';\n\tif (is_null($a)) return 'null';\n\tif (is_array($a)) {\n\t\t$s = '';\n\t\tfor ($i = 0; $i < count($a); ++$i) {\n\t\t\tif ($i > 0) $s .= ',';\n\t\t\tif (!is_null($a[$i]))\n\t\t\t\t$s .= ToString($a[$i]);\n\t\t}\n\t\treturn $s;\n\t}\n\treturn '[object Object]';\n}\n";a+="function ToBoolean($a) {\n\tif (is_string($a)) return strlen($a) > 0;\n\tif (is_array($a) || is_object($a)) return true;\n\treturn (bool)$a;\n}\n";
a+=b;return a+="return $t_r;\n}"},version:"1.1.0"}}();
